# Курс Administrator Linux. Professional

## Урок 28. Домашнее задание №17

### Резервное копирование. Настраиваем бэкапы  
  
**Создаём виртуальные машины**  
  
Использую _[Vagrantfile](Vagrantfile)_, который в репозитории  
  
```vagrant up```  
запускаем виртуальные машины  
  
Будут созданы виртуальные машины:  
с именем **_client_**, ip-адресом - **_192.168.11.150_**  
с именем **_backup_**, ip-адресом - **_192.168.11.160_**  

Отработает _[скрипт](install_script.sh)_, который установит на обе машины необходимое ПО   



Заходим на машину:  
```vagrant ssh backup```

здесь нужно примонтировать второй жесткий диск, дать права на папку для бэкапа пользовотелю borg  
так же на обоих машинах нужно настроить между собой ssh соединение по ключу.

На сервере backup создаем пользователя и каталог /var/backup (в домашнем задании нужно будет создать диск ~2Gb и примонтировать его) и назначаем на него права пользователя borg
	# useradd -m 			
	# mkdir /var/backup
	# chown borg:borg /var/backup/

На сервер backup создаем каталог ~/.ssh/authorized_keys в каталоге /home/borg
	# su - borg
	# mkdir .ssh
   	# touch .ssh/authorized_keys
   	# chmod 700 .ssh
   	# chmod 600 .ssh/authorized_keys

На client генерируем ssh-ключ и добавляем его на сервер backup  в файл authorized_keys созданным на прошлом шаге 
	# ssh-keygen



Все дальнейшие действия будут проходить на машине **_client_**